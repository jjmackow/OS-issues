!function(t,e){"use strict";"function"==typeof define&&define.amd?define([window.dBlazy,window.Bio],e):"object"==typeof exports?module.exports=e(window.dBlazy,window.Bio):t.BioMedia=e(window.dBlazy,window.Bio)}(this,function(t,e){"use strict";function r(t){return n.apply(this,arguments)}var o=t,n=e,i="data-src",s=["src"],a=["srcset","src"],c=r.prototype=Object.create(e.prototype);return c.constructor=r,c.prepare=function(t){return function(){var e=this;return e.opts.breakpoints&&o.forEach(e.opts.breakpoints,function(t){if(s.push(t.src.replace("data-","")),t.width<=e.windowWidth)return i=t.src,!1}),t.call(this)}}(c.prepare),c.lazyLoad=function(t){return function(e){var r=this,n=e.parentNode,i=r.equal(e,"img"),s=void 0===e.src&&e.classList.contains(r.opts.bgClass),a=n&&r.equal(n,"picture"),c=r.equal(e,"video");return a?(o.forEach(n.getElementsByTagName("source"),function(t){r.setAttr(t,"srcset")}),r.loaded(e,r._ok)):c?(o.forEach(e.getElementsByTagName("source"),function(t){r.setAttr(t,"src")}),e.load(),r.loaded(e,r._ok)):i||s?r.setImage(e,s):e.getAttribute("data-src")&&e.hasAttribute("src")&&(e.src=e.getAttribute("data-src"),r.loaded(e,r._ok)),t.apply(this,arguments)}}(c.lazyLoad),c.loaded=function(t){return function(e,r){return this.removeAttrs(e,a),t.apply(this,arguments)}}(c.loaded),c.promise=function(t,e){var r=this;return new Promise(function(o,n){var s=new Image;r.setAttrs(t,a,s,e?i:"data-src"),s.onload=function(){e?r.setBg(t):r.setAttrs(t,a),o(r._ok)},s.onerror=function(){n(r._er)}})},c.setImage=function(t,e){var r=this;return r.promise(t,e).then(function(e){r.loaded(t,e)}).catch(function(e){r.loaded(t,e)}).finally(function(){r.removeAttrs(t,a)})},c.setBg=function(t){var e=this;t.hasAttribute(i)&&(t.style.backgroundImage='url("'+t.getAttribute(i)+'")',e.removeAttrs(t,s),t.removeAttribute("src"))},r});
